import{n as Ce,c as N,o as B,a as v,b as re,w as q,v as Z,F as fe,r as he,t as de,d as Re,e as Le,f as we,g as be}from"./vendor-W5Jr92EZ.js";import{E as De}from"./pdf-libs-Dsvz6TSF.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const y of document.querySelectorAll('link[rel="modulepreload"]'))R(y);new MutationObserver(y=>{for(const C of y)if(C.type==="childList")for(const u of C.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&R(u)}).observe(document,{childList:!0,subtree:!0});function d(y){const C={};return y.integrity&&(C.integrity=y.integrity),y.referrerPolicy&&(C.referrerPolicy=y.referrerPolicy),y.crossOrigin==="use-credentials"?C.credentials="include":y.crossOrigin==="anonymous"?C.credentials="omit":C.credentials="same-origin",C}function R(y){if(y.ep)return;y.ep=!0;const C=d(y);fetch(y.href,C)}})();var ee={exports:{}},ge;function Ge(){return ge||(ge=1,function(s,l){(function(){var d={};d.version="1.0.4",d.remove=function(e){var t=!1;if(e.slice(0,2)!="ÿØ")if(e.slice(0,23)=="data:image/jpeg;base64,"||e.slice(0,22)=="data:image/jpg;base64,")e=T(e.split(",")[1]),t=!0;else throw new Error("Given data is not jpeg.");var i=_(e),a=i.filter(function(n){return!(n.slice(0,2)=="ÿá"&&n.slice(4,10)=="Exif\0\0")}),r=a.join("");return t&&(r="data:image/jpeg;base64,"+G(r)),r},d.insert=function(e,t){var i=!1;if(e.slice(0,6)!="Exif\0\0")throw new Error("Given data is not exif.");if(t.slice(0,2)!="ÿØ")if(t.slice(0,23)=="data:image/jpeg;base64,"||t.slice(0,22)=="data:image/jpg;base64,")t=T(t.split(",")[1]),i=!0;else throw new Error("Given data is not jpeg.");var a="ÿá"+m(">H",[e.length+2])+e,r=_(t),n=H(r,a);return i&&(n="data:image/jpeg;base64,"+G(n)),n},d.load=function(e){var t;if(typeof e=="string")if(e.slice(0,2)=="ÿØ")t=e;else if(e.slice(0,23)=="data:image/jpeg;base64,"||e.slice(0,22)=="data:image/jpg;base64,")t=T(e.split(",")[1]);else if(e.slice(0,4)=="Exif")t=e.slice(6);else throw new Error("'load' gots invalid file data.");else throw new Error("'load' gots invalid type argument.");var i={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},a=new F(t);if(a.tiftag===null)return i;a.tiftag.slice(0,2)=="II"?a.endian_mark="<":a.endian_mark=">";var r=g(a.endian_mark+"L",a.tiftag.slice(4,8))[0];i["0th"]=a.get_ifd(r,"0th");var n=i["0th"].first_ifd_pointer;if(delete i["0th"].first_ifd_pointer,34665 in i["0th"]&&(r=i["0th"][34665],i.Exif=a.get_ifd(r,"Exif")),34853 in i["0th"]&&(r=i["0th"][34853],i.GPS=a.get_ifd(r,"GPS")),40965 in i.Exif&&(r=i.Exif[40965],i.Interop=a.get_ifd(r,"Interop")),n!="\0\0\0\0"&&(r=g(a.endian_mark+"L",n)[0],i["1st"]=a.get_ifd(r,"1st"),513 in i["1st"]&&514 in i["1st"])){var o=i["1st"][513]+i["1st"][514],h=a.tiftag.slice(i["1st"][513],o);i.thumbnail=h}return i},d.dump=function(e){var t=8,i=R(e),a="Exif\0\0MM\0*\0\0\0\b",r=!1,n=!1,o=!1,h=!1,f,c,S,x,I;"0th"in i?f=i["0th"]:f={},"Exif"in i&&Object.keys(i.Exif).length||"Interop"in i&&Object.keys(i.Interop).length?(f[34665]=1,r=!0,c=i.Exif,"Interop"in i&&Object.keys(i.Interop).length?(c[40965]=1,o=!0,S=i.Interop):Object.keys(c).indexOf(d.ExifIFD.InteroperabilityTag.toString())>-1&&delete c[40965]):Object.keys(f).indexOf(d.ImageIFD.ExifTag.toString())>-1&&delete f[34665],"GPS"in i&&Object.keys(i.GPS).length?(f[d.ImageIFD.GPSTag]=1,n=!0,x=i.GPS):Object.keys(f).indexOf(d.ImageIFD.GPSTag.toString())>-1&&delete f[d.ImageIFD.GPSTag],"1st"in i&&"thumbnail"in i&&i.thumbnail!=null&&(h=!0,i["1st"][513]=1,i["1st"][514]=1,I=i["1st"]);var D=p(f,"0th",0),A=D[0].length+r*12+n*12+4+D[1].length,E,Q="",k=0,K,te="",V=0,oe,ie="",ne=0,z,se="",$;if(r&&(E=p(c,"Exif",A),k=E[0].length+o*12+E[1].length),n&&(K=p(x,"GPS",A+k),te=K.join(""),V=te.length),o){var ae=A+k+V;oe=p(S,"Interop",ae),ie=oe.join(""),ne=ie.length}if(h){var ae=A+k+V+ne;if(z=p(I,"1st",ae),$=y(i.thumbnail),$.length>64e3)throw new Error("Given thumbnail is too large. max 64kB")}var le="",me="",pe="",ce="\0\0\0\0";if(r){var M=t+A,X=m(">L",[M]),j=34665,J=m(">H",[j]),Y=m(">H",[O.Long]),W=m(">L",[1]);le=J+Y+W+X}if(n){var M=t+A+k,X=m(">L",[M]),j=34853,J=m(">H",[j]),Y=m(">H",[O.Long]),W=m(">L",[1]);me=J+Y+W+X}if(o){var M=t+A+k+V,X=m(">L",[M]),j=40965,J=m(">H",[j]),Y=m(">H",[O.Long]),W=m(">L",[1]);pe=J+Y+W+X}if(h){var M=t+A+k+V+ne;ce=m(">L",[M]);var Se=M+z[0].length+24+4+z[1].length,xe="\0\0\0\0"+m(">L",[Se]),Pe="\0\0\0\0"+m(">L",[$.length]);se=z[0]+xe+Pe+"\0\0\0\0"+z[1]+$}var ve=D[0]+le+me+ce+D[1];return r&&(Q=E[0]+pe+E[1]),a+ve+Q+te+ie+se};function R(e){return JSON.parse(JSON.stringify(e))}function y(e){for(var t=_(e);"ÿà"<=t[1].slice(0,2)&&t[1].slice(0,2)<="ÿï";)t=[t[0]].concat(t.slice(2));return t.join("")}function C(e){return m(">"+b("B",e.length),e)}function u(e){return m(">"+b("H",e.length),e)}function L(e){return m(">"+b("L",e.length),e)}function w(e,t,i){var a="",r="",n,o,h,f;if(t=="Byte")n=e.length,n<=4?r=C(e)+b("\0",4-n):(r=m(">L",[i]),a=C(e));else if(t=="Short")n=e.length,n<=2?r=u(e)+b("\0\0",2-n):(r=m(">L",[i]),a=u(e));else if(t=="Long")n=e.length,n<=1?r=L(e):(r=m(">L",[i]),a=L(e));else if(t=="Ascii")o=e+"\0",n=o.length,n>4?(r=m(">L",[i]),a=o):r=o+b("\0",4-n);else if(t=="Rational"){if(typeof e[0]=="number")n=1,h=e[0],f=e[1],o=m(">L",[h])+m(">L",[f]);else{n=e.length,o="";for(var c=0;c<n;c++)h=e[c][0],f=e[c][1],o+=m(">L",[h])+m(">L",[f])}r=m(">L",[i]),a=o}else if(t=="SRational"){if(typeof e[0]=="number")n=1,h=e[0],f=e[1],o=m(">l",[h])+m(">l",[f]);else{n=e.length,o="";for(var c=0;c<n;c++)h=e[c][0],f=e[c][1],o+=m(">l",[h])+m(">l",[f])}r=m(">L",[i]),a=o}else t=="Undefined"&&(n=e.length,n>4?(r=m(">L",[i]),a=e):r=e+b("\0",4-n));var S=m(">L",[n]);return[S,r,a]}function p(e,t,i){var a=8,r=Object.keys(e).length,n=m(">H",[r]),o;["0th","1st"].indexOf(t)>-1?o=2+r*12+4:o=2+r*12;var h="",f="",c;for(var c in e)if(typeof c=="string"&&(c=parseInt(c)),!(t=="0th"&&[34665,34853].indexOf(c)>-1)){{if(t=="Exif"&&c==40965)continue;if(t=="1st"&&[513,514].indexOf(c)>-1)continue}var S=e[c],x=m(">H",[c]),I=P[t][c].type,D=m(">H",[O[I]]);typeof S=="number"&&(S=[S]);var A=a+o+i+f.length,E=w(S,I,A),Q=E[0],k=E[1],K=E[2];h+=x+D+Q+k,f+=K}return[n+h,f]}function F(e){var t,i;if(e.slice(0,2)=="ÿØ")t=_(e),i=U(t),i?this.tiftag=i.slice(10):this.tiftag=null;else if(["II","MM"].indexOf(e.slice(0,2))>-1)this.tiftag=e;else if(e.slice(0,4)=="Exif")this.tiftag=e.slice(6);else throw new Error("Given file is neither JPEG nor TIFF.")}if(F.prototype={get_ifd:function(e,t){var i={},a=g(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],r=e+2,n;["0th","1st"].indexOf(t)>-1?n="Image":n=t;for(var o=0;o<a;o++){e=r+12*o;var h=g(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],f=g(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],c=g(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],S=this.tiftag.slice(e+8,e+12),x=[f,c,S];h in P[n]&&(i[h]=this.convert_value(x))}return t=="0th"&&(e=r+12*a,i.first_ifd_pointer=this.tiftag.slice(e,e+4)),i},convert_value:function(e){var t=null,i=e[0],a=e[1],r=e[2],n;if(i==1)a>4?(n=g(this.endian_mark+"L",r)[0],t=g(this.endian_mark+b("B",a),this.tiftag.slice(n,n+a))):t=g(this.endian_mark+b("B",a),r.slice(0,a));else if(i==2)a>4?(n=g(this.endian_mark+"L",r)[0],t=this.tiftag.slice(n,n+a-1)):t=r.slice(0,a-1);else if(i==3)a>2?(n=g(this.endian_mark+"L",r)[0],t=g(this.endian_mark+b("H",a),this.tiftag.slice(n,n+a*2))):t=g(this.endian_mark+b("H",a),r.slice(0,a*2));else if(i==4)a>1?(n=g(this.endian_mark+"L",r)[0],t=g(this.endian_mark+b("L",a),this.tiftag.slice(n,n+a*4))):t=g(this.endian_mark+b("L",a),r);else if(i==5)if(n=g(this.endian_mark+"L",r)[0],a>1){t=[];for(var o=0;o<a;o++)t.push([g(this.endian_mark+"L",this.tiftag.slice(n+o*8,n+4+o*8))[0],g(this.endian_mark+"L",this.tiftag.slice(n+4+o*8,n+8+o*8))[0]])}else t=[g(this.endian_mark+"L",this.tiftag.slice(n,n+4))[0],g(this.endian_mark+"L",this.tiftag.slice(n+4,n+8))[0]];else if(i==7)a>4?(n=g(this.endian_mark+"L",r)[0],t=this.tiftag.slice(n,n+a)):t=r.slice(0,a);else if(i==9)a>1?(n=g(this.endian_mark+"L",r)[0],t=g(this.endian_mark+b("l",a),this.tiftag.slice(n,n+a*4))):t=g(this.endian_mark+b("l",a),r);else if(i==10)if(n=g(this.endian_mark+"L",r)[0],a>1){t=[];for(var o=0;o<a;o++)t.push([g(this.endian_mark+"l",this.tiftag.slice(n+o*8,n+4+o*8))[0],g(this.endian_mark+"l",this.tiftag.slice(n+4+o*8,n+8+o*8))[0]])}else t=[g(this.endian_mark+"l",this.tiftag.slice(n,n+4))[0],g(this.endian_mark+"l",this.tiftag.slice(n+4,n+8))[0]];else throw new Error("Exif might be wrong. Got incorrect value type to decode. type:"+i);return t instanceof Array&&t.length==1?t[0]:t}},typeof window<"u"&&typeof window.btoa=="function")var G=window.btoa;if(typeof G>"u")var G=function(t){for(var i="",a,r,n,o,h,f,c,S=0,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";S<t.length;)a=t.charCodeAt(S++),r=t.charCodeAt(S++),n=t.charCodeAt(S++),o=a>>2,h=(a&3)<<4|r>>4,f=(r&15)<<2|n>>6,c=n&63,isNaN(r)?f=c=64:isNaN(n)&&(c=64),i=i+x.charAt(o)+x.charAt(h)+x.charAt(f)+x.charAt(c);return i};if(typeof window<"u"&&typeof window.atob=="function")var T=window.atob;if(typeof T>"u")var T=function(t){var i="",a,r,n,o,h,f,c,S=0,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");S<t.length;)o=x.indexOf(t.charAt(S++)),h=x.indexOf(t.charAt(S++)),f=x.indexOf(t.charAt(S++)),c=x.indexOf(t.charAt(S++)),a=o<<2|h>>4,r=(h&15)<<4|f>>2,n=(f&3)<<6|c,i=i+String.fromCharCode(a),f!=64&&(i=i+String.fromCharCode(r)),c!=64&&(i=i+String.fromCharCode(n));return i};function m(e,t){if(!(t instanceof Array))throw new Error("'pack' error. Got invalid type argument.");if(e.length-1!=t.length)throw new Error("'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.");var i;if(e[0]=="<")i=!0;else if(e[0]==">")i=!1;else throw new Error("");for(var a="",r=1,n=null,o=null,h=null;o=e[r];){if(o.toLowerCase()=="b"){if(n=t[r-1],o=="b"&&n<0&&(n+=256),n>255||n<0)throw new Error("'pack' error.");h=String.fromCharCode(n)}else if(o=="H"){if(n=t[r-1],n>65535||n<0)throw new Error("'pack' error.");h=String.fromCharCode(Math.floor(n%65536/256))+String.fromCharCode(n%256),i&&(h=h.split("").reverse().join(""))}else if(o.toLowerCase()=="l"){if(n=t[r-1],o=="l"&&n<0&&(n+=4294967296),n>4294967295||n<0)throw new Error("'pack' error.");h=String.fromCharCode(Math.floor(n/16777216))+String.fromCharCode(Math.floor(n%16777216/65536))+String.fromCharCode(Math.floor(n%65536/256))+String.fromCharCode(n%256),i&&(h=h.split("").reverse().join(""))}else throw new Error("'pack' error.");a+=h,r+=1}return a}function g(e,t){if(typeof t!="string")throw new Error("'unpack' error. Got invalid type argument.");for(var i=0,a=1;a<e.length;a++)if(e[a].toLowerCase()=="b")i+=1;else if(e[a].toLowerCase()=="h")i+=2;else if(e[a].toLowerCase()=="l")i+=4;else throw new Error("'unpack' error. Got invalid mark.");if(i!=t.length)throw new Error("'unpack' error. Mismatch between symbol and string length. "+i+":"+t.length);var r;if(e[0]=="<")r=!0;else if(e[0]==">")r=!1;else throw new Error("'unpack' error.");for(var n=[],o=0,h=1,f=null,c=null,S=null,x="";c=e[h];){if(c.toLowerCase()=="b")S=1,x=t.slice(o,o+S),f=x.charCodeAt(0),c=="b"&&f>=128&&(f-=256);else if(c=="H")S=2,x=t.slice(o,o+S),r&&(x=x.split("").reverse().join("")),f=x.charCodeAt(0)*256+x.charCodeAt(1);else if(c.toLowerCase()=="l")S=4,x=t.slice(o,o+S),r&&(x=x.split("").reverse().join("")),f=x.charCodeAt(0)*16777216+x.charCodeAt(1)*65536+x.charCodeAt(2)*256+x.charCodeAt(3),c=="l"&&f>=2147483648&&(f-=4294967296);else throw new Error("'unpack' error. "+c);n.push(f),o+=S,h+=1}return n}function b(e,t){for(var i="",a=0;a<t;a++)i+=e;return i}function _(e){if(e.slice(0,2)!="ÿØ")throw new Error("Given data isn't JPEG.");for(var t=2,i=["ÿØ"];;){if(e.slice(t,t+2)=="ÿÚ"){i.push(e.slice(t));break}else{var a=g(">H",e.slice(t+2,t+4))[0],r=t+a+2;i.push(e.slice(t,r)),t=r}if(t>=e.length)throw new Error("Wrong JPEG data.")}return i}function U(e){for(var t,i=0;i<e.length;i++)if(t=e[i],t.slice(0,2)=="ÿá"&&t.slice(4,10)=="Exif\0\0")return t;return null}function H(e,t){var i=!1,a=[];return e.forEach(function(r,n){r.slice(0,2)=="ÿá"&&r.slice(4,10)=="Exif\0\0"&&(i?a.unshift(n):(e[n]=t,i=!0))}),a.forEach(function(r){e.splice(r,1)}),!i&&t&&(e=[e[0],t].concat(e.slice(1))),e.join("")}var O={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},P={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};P["0th"]=P.Image,P["1st"]=P.Image,d.TAGS=P,d.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},d.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},d.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},d.InteropIFD={InteroperabilityIndex:1},d.GPSHelper={degToDmsRational:function(e){var t=Math.abs(e),i=t%1*60,a=i%1*60,r=Math.floor(t),n=Math.floor(i),o=Math.round(a*100);return[[r,1],[n,1],[o,100]]},dmsRationalToDeg:function(e,t){var i=t==="S"||t==="W"?-1:1,a=e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600;return a*i}},s.exports&&(l=s.exports=d),l.piexif=d})()}(ee,ee.exports)),ee.exports}var ye=Ge();const Fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0'%20fill='none'%20width='20'%20height='20'/%3e%3cg%3e%3cpath%20d='M7%205H5.05c0-1.74.85-2.9%202.95-2.9V0C4.85%200%202.96%202.11%202.96%205H1.18L3.8%208.39zm13-4v14h-5v5H1V10h9V1h10zm-2%202h-6v7h3v3h3V3zm-5%209H3v6h10v-6z'/%3e%3c/g%3e%3c/svg%3e",Ie="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='-6.7%200%20122.88%20122.88'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20enable-background='new%200%200%20109.484%20122.88'%20xml:space='preserve'%3e%3cg%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.347,9.633h38.297V3.76c0-2.068,1.689-3.76,3.76-3.76h21.144%20c2.07,0,3.76,1.691,3.76,3.76v5.874h37.83c1.293,0,2.347,1.057,2.347,2.349v11.514H0V11.982C0,10.69,1.055,9.633,2.347,9.633%20L2.347,9.633z%20M8.69,29.605h92.921c1.937,0,3.696,1.599,3.521,3.524l-7.864,86.229c-0.174,1.926-1.59,3.521-3.523,3.521h-77.3%20c-1.934,0-3.352-1.592-3.524-3.521L5.166,33.129C4.994,31.197,6.751,29.605,8.69,29.605L8.69,29.605z%20M69.077,42.998h9.866v65.314%20h-9.866V42.998L69.077,42.998z%20M30.072,42.998h9.867v65.314h-9.867V42.998L30.072,42.998z%20M49.572,42.998h9.869v65.314h-9.869%20V42.998L49.572,42.998z'/%3e%3c/g%3e%3c/svg%3e",ue=(s,l)=>{const d=s.__vccOpts||s;for(const[R,y]of l)d[R]=y;return d},Ae={data(){return{unitName:"",month:"",recorder:"",className:"",domains:[{name:"身體動作",images:[],description:"",rotation:[]},{name:"社會情緒",images:[],description:"",rotation:[]},{name:"語言溝通",images:[],description:"",rotation:[]},{name:"認知探索",images:[],description:"",rotation:[]},{name:"生活自理",images:[],description:"",rotation:[]},{name:"教玩具操作 / 文化藝術",images:[],description:"",rotation:[]}],isGeneratingPDF:!1,pdfGenerated:!1,popupMessage:"產生PDF中，請稍待片刻..."}},methods:{checkDescriptionLength(s){s.description.length>60&&(alert("說明欄位最多 60 個字！"),s.description=s.description.substring(0,60))},validateDescription(s){!s||!s.description||s.description.length>60&&alert("說明欄位最多 60 個字！")},handleFileUpload(s,l){const d=Array.from(s.target.files);if(!d.length)return;const R=["image/jpeg","image/png","image/jpg"];this.domains[l].images||(this.domains[l].images=[]);let y=this.domains[l].images.length,C=2-y;if(y>=2){alert("最多只能上傳 2 張圖片");return}d.slice(0,C).forEach(u=>{if(!R.includes(u.type)){alert("僅支援 JPG、JPEG、PNG 格式的圖片"),s.target.value="";return}const L=new FileReader;L.onload=w=>{const p=new Image;p.src=w.target.result,p.onload=()=>{try{const F=w.target.result,T=ye.piexif.load(F)["0th"][ye.piexif.ImageIFD.Orientation]||1,m=document.createElement("canvas"),g=m.getContext("2d");switch(m.width=p.width,m.height=p.height,T){case 2:g.transform(-1,0,0,1,p.width,0);break;case 3:g.transform(-1,0,0,-1,p.width,p.height);break;case 4:g.transform(1,0,0,-1,0,p.height);break;case 5:m.width=p.height,m.height=p.width,g.transform(0,1,1,0,0,0);break;case 6:m.width=p.height,m.height=p.width,g.transform(0,1,-1,0,p.height,0);break;case 7:m.width=p.height,m.height=p.width,g.transform(0,-1,-1,0,p.height,p.width);break;case 8:m.width=p.height,m.height=p.width,g.transform(0,-1,1,0,0,p.width);break;default:m.width=p.width,m.height=p.height,g.transform(1,0,0,1,0,0)}g.drawImage(p,0,0,p.width,p.height),m.toBlob(b=>{const _=URL.createObjectURL(b);this.domains[l].images.push(_),this.domains[l].rotation.push(0)},u.type)}catch(F){console.error("Error reading EXIF data:",F),this.domains[l].images.push(p.src)}}},L.readAsDataURL(u)}),s.target.value=null},rotateImage(s,l){this.domains[s].rotation[l]=(this.domains[s].rotation[l]+90)%360},removeImage(s,l){this.domains[s].images.splice(l,1)},getRotatedImage(s,l){const d=document.createElement("canvas"),R=d.getContext("2d");return l===90||l===270?(d.width=s.height,d.height=s.width):(d.width=s.width,d.height=s.height),R.translate(d.width/2,d.height/2),R.rotate(l*Math.PI/180),R.drawImage(s,-s.width/2,-s.height/2),d.toDataURL()},async loadFont(s){const d=`/teacher-upload/fonts/${s}`,R=await fetch(d);if(!R.ok)throw new Error(`Failed to load font: ${d}`);const y=await R.arrayBuffer(),C=new Uint8Array(y).reduce((u,L)=>u+String.fromCharCode(L),"");return btoa(C)},async generatePDF(){this.isGeneratingPDF=!0,this.pdfGenerated=!1,this.popupMessage="產生PDF中，請稍待片刻...",await Ce();const s=new De("p","mm","a4"),l=await this.loadFont("NotoSansTC-Regular.ttf"),d=await this.loadFont("NotoSansTC-Bold.ttf");if(!l||!d)throw new Error("字體載入失敗，字體資料為空");s.addFileToVFS("NotoSansTC-Regular.ttf",l),s.addFont("NotoSansTC-Regular.ttf","NotoSansTC","normal"),s.addFileToVFS("NotoSansTC-Bold.ttf",d),s.addFont("NotoSansTC-Bold.ttf","NotoSansTC-Bold","bold"),s.setFont("NotoSansTC-Bold","bold");let R=15;s.setFontSize(18),s.text("臺北市私立長藤托嬰中心",70,R),s.setFont("NotoSansTC","normal"),s.setFontSize(12),s.text(`單元名稱: ${this.unitName}`,10,R+15);let y=70,C=110,u=150;s.text(`年月: ${this.month}`,y,R+15),s.text(`班級: ${this.className}`,C,R+15),s.text(`記錄者: ${this.recorder}`,u,R+15);const L=10,w=R+20,p=[35,85,70],F=6,G=40,T=p.reduce((P,e)=>P+e,0),m=this.domains.length;s.setLineWidth(.5),s.rect(L,w,p.reduce((P,e)=>P+e,0),6+G*m),s.setFont("NotoSansTC-Bold","bold"),s.setFontSize(12);let g=L+p[0]/2,b=L+p[0]+p[1]/2,_=L+p[0]+p[1]+p[2]/2,U=w+F-1.5;s.text("發展領域",g,U,{align:"center"}),s.text("照片",b,U,{align:"center"}),s.text("說明",_,U,{align:"center"});for(let P=0;P<m;P++){let e=w+F+P*G;s.line(L,e,L+T,e),s.setFont("NotoSansTC-Bold","bold"),s.setFontSize(12);let t=L+p[0]/2,i=e+G/2,a=s.splitTextToSize(this.domains[P].name,p[0]-10);s.text(a,t,i,{align:"center",baseline:"middle"});let r=this.domains[P].description.substring(0,60),n=p[2]-4,o=s.splitTextToSize(r,n),h=7,f=o.length*h,c=e+(G-f)/2+h/2,S=L+p[0]+p[1]+p[2]/2;s.setFont("NotoSansTC","normal"),s.setFontSize(10),s.text(o,S,c,{align:"center",baseline:"middle"})}let H=L;for(let P of p)H+=P,s.line(H,w,H,w+F+G*m);for(let P=0;P<m;P++){let e=w+F+P*G,t=p[1]/2-3,i=G-6,a=L+p[0]+2,r=a+t+1.5,n=this.domains[P].images||[];for(let o=0;o<n.length;o++){let h=n[o],f=h.includes("image/png")?"PNG":"JPEG",c=new Image;c.src=h,await new Promise(S=>{c.onload=()=>{let x=this.getRotatedImage(c,this.domains[P].rotation[o]),I=c.width,D=c.height;(this.domains[P].rotation[o]===90||this.domains[P].rotation[o]===270)&&([I,D]=[D,I]),I>t&&(D*=t/I,I=t),D>i&&(I*=i/D,D=i);let A=e+(G-D)/2,E=o===0?a:r;s.addImage(x,f,E,A,I,D),S()}})}}let O=`發展領域記錄表-${this.month}-${this.recorder}.pdf`;s.save(O),this.isGeneratingPDF=!1,this.pdfGenerated=!0,this.popupMessage="PDF已完成，請自行下載。",this.unitName="",this.month="",this.recorder="",this.className="",this.domains.forEach(P=>{P.images=[],P.description="",P.rotation=[]}),setTimeout(()=>{this.pdfGenerated=!1},3e3)}}},Ee={class:"container"},Te={class:"card"},ke={class:"form-group"},Be={class:"card"},_e={class:"file-label"},Me=["onChange"],Ne={key:0,class:"image-preview"},Oe={class:"image-wrapper"},Ue=["src"],He={class:"image-actions"},Ve=["onClick"],ze=["onClick"],Xe=["onUpdate:modelValue","onInput","onBlur"],je={key:1,class:"error"},Je={key:0,class:"overlay"},Ye={class:"popup"};function We(s,l,d,R,y,C){return B(),N("div",Ee,[l[16]||(l[16]=v("h1",null,"六大發展領域記錄表",-1)),v("section",Te,[l[11]||(l[11]=v("h2",null,"Step 1: 填寫班級資料",-1)),v("div",ke,[l[5]||(l[5]=v("label",null,"單元名稱",-1)),q(v("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=u=>y.unitName=u),maxlength:"5",placeholder:"輸入單元名稱"},null,512),[[Z,y.unitName]]),l[6]||(l[6]=v("div",{class:"alert alert-info"},"最多只能輸入5個字",-1)),l[7]||(l[7]=v("label",null,"年+月份",-1)),q(v("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=u=>y.month=u),placeholder:"輸入年+月份"},null,512),[[Z,y.month]]),l[8]||(l[8]=v("div",{class:"alert alert-info"},"ex: 114年3月",-1)),l[9]||(l[9]=v("label",null,"班級",-1)),q(v("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=u=>y.className=u),placeholder:"輸入班級"},null,512),[[Z,y.className]]),l[10]||(l[10]=v("label",null,"記錄者",-1)),q(v("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=u=>y.recorder=u),placeholder:"輸入記錄者"},null,512),[[Z,y.recorder]])])]),v("section",Be,[l[15]||(l[15]=v("h2",null,"Step 2: 上傳六大發展領域資料",-1)),(B(!0),N(fe,null,he(y.domains,(u,L)=>(B(),N("div",{key:L,class:"domain-card"},[v("h3",null,de(u.name),1),v("label",_e,[v("input",{type:"file",accept:"image/jpeg, image/png",onChange:w=>C.handleFileUpload(w,L),multiple:""},null,40,Me)]),(u.images||[]).length?(B(),N("div",Ne,[(B(!0),N(fe,null,he(u.images||[],(w,p)=>(B(),N("div",{key:p,class:"image-container"},[v("div",Oe,[v("img",{src:w,alt:"上傳圖片",width:"200px",style:Re({transform:`rotate(${u.rotation[p]}deg)`})},null,12,Ue)]),v("div",He,[v("button",{onClick:F=>C.rotateImage(L,p),class:"rotate-btn"},l[12]||(l[12]=[v("img",{src:Fe,alt:"旋轉",width:"26",height:"26"},null,-1)]),8,Ve),v("button",{onClick:F=>C.removeImage(L,p),class:"delete-btn"},l[13]||(l[13]=[v("img",{src:Ie,alt:"刪除",width:"30",height:"30"},null,-1)]),8,ze)])]))),128))])):re("",!0),l[14]||(l[14]=v("div",{class:"alert alert-danger"},"最多只能上傳 2 張圖片",-1)),q(v("textarea",{"onUpdate:modelValue":w=>u.description=w,onInput:w=>C.checkDescriptionLength(u),onBlur:w=>C.validateDescription(u),placeholder:"請輸入發展領域說明",maxlength:"60",rows:"3"},null,40,Xe),[[Z,u.description]]),u.description.length>=60?(B(),N("small",je,"⚠️ 最多只能輸入 60 個字！")):re("",!0)]))),128))]),y.isGeneratingPDF||y.pdfGenerated?(B(),N("div",Je,[v("div",Ye,[v("p",null,de(y.popupMessage),1)])])):re("",!0),v("button",{class:"pdf-button",onClick:l[4]||(l[4]=(...u)=>C.generatePDF&&C.generatePDF(...u))},"📄 產生 PDF")])}const qe=ue(Ae,[["render",We]]),Ze={components:{UploadForm:qe}};function Qe(s,l,d,R,y,C){const u=Le("UploadForm");return B(),we(u)}const Ke=ue(Ze,[["render",Qe]]);be(Ke).mount("#app");
