import{n as Ce,c as M,o as B,a as C,b as re,w as q,v as Z,F as ce,r as he,t as de,d as Re,e as Le,f as be,g as we}from"./vendor-W5Jr92EZ.js";import{E as De}from"./pdf-libs-Dsvz6TSF.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))x(c);new MutationObserver(c=>{for(const y of c)if(y.type==="childList")for(const g of y.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&x(g)}).observe(document,{childList:!0,subtree:!0});function f(c){const y={};return c.integrity&&(y.integrity=c.integrity),c.referrerPolicy&&(y.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?y.credentials="include":c.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function x(c){if(c.ep)return;c.ep=!0;const y=f(c);fetch(c.href,y)}})();var ee={exports:{}},ge;function Ge(){return ge||(ge=1,function(o,l){(function(){var f={};f.version="1.0.4",f.remove=function(e){var t=!1;if(e.slice(0,2)!="ÿØ")if(e.slice(0,23)=="data:image/jpeg;base64,"||e.slice(0,22)=="data:image/jpg;base64,")e=G(e.split(",")[1]),t=!0;else throw new Error("Given data is not jpeg.");var i=O(e),n=i.filter(function(a){return!(a.slice(0,2)=="ÿá"&&a.slice(4,10)=="Exif\0\0")}),r=n.join("");return t&&(r="data:image/jpeg;base64,"+D(r)),r},f.insert=function(e,t){var i=!1;if(e.slice(0,6)!="Exif\0\0")throw new Error("Given data is not exif.");if(t.slice(0,2)!="ÿØ")if(t.slice(0,23)=="data:image/jpeg;base64,"||t.slice(0,22)=="data:image/jpg;base64,")t=G(t.split(",")[1]),i=!0;else throw new Error("Given data is not jpeg.");var n="ÿá"+p(">H",[e.length+2])+e,r=O(t),a=H(r,n);return i&&(a="data:image/jpeg;base64,"+D(a)),a},f.load=function(e){var t;if(typeof e=="string")if(e.slice(0,2)=="ÿØ")t=e;else if(e.slice(0,23)=="data:image/jpeg;base64,"||e.slice(0,22)=="data:image/jpg;base64,")t=G(e.split(",")[1]);else if(e.slice(0,4)=="Exif")t=e.slice(6);else throw new Error("'load' gots invalid file data.");else throw new Error("'load' gots invalid type argument.");var i={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},n=new I(t);if(n.tiftag===null)return i;n.tiftag.slice(0,2)=="II"?n.endian_mark="<":n.endian_mark=">";var r=u(n.endian_mark+"L",n.tiftag.slice(4,8))[0];i["0th"]=n.get_ifd(r,"0th");var a=i["0th"].first_ifd_pointer;if(delete i["0th"].first_ifd_pointer,34665 in i["0th"]&&(r=i["0th"][34665],i.Exif=n.get_ifd(r,"Exif")),34853 in i["0th"]&&(r=i["0th"][34853],i.GPS=n.get_ifd(r,"GPS")),40965 in i.Exif&&(r=i.Exif[40965],i.Interop=n.get_ifd(r,"Interop")),a!="\0\0\0\0"&&(r=u(n.endian_mark+"L",a)[0],i["1st"]=n.get_ifd(r,"1st"),513 in i["1st"]&&514 in i["1st"])){var s=i["1st"][513]+i["1st"][514],d=n.tiftag.slice(i["1st"][513],s);i.thumbnail=d}return i},f.dump=function(e){var t=8,i=x(e),n="Exif\0\0MM\0*\0\0\0\b",r=!1,a=!1,s=!1,d=!1,h,m,S,P,A;"0th"in i?h=i["0th"]:h={},"Exif"in i&&Object.keys(i.Exif).length||"Interop"in i&&Object.keys(i.Interop).length?(h[34665]=1,r=!0,m=i.Exif,"Interop"in i&&Object.keys(i.Interop).length?(m[40965]=1,s=!0,S=i.Interop):Object.keys(m).indexOf(f.ExifIFD.InteroperabilityTag.toString())>-1&&delete m[40965]):Object.keys(h).indexOf(f.ImageIFD.ExifTag.toString())>-1&&delete h[34665],"GPS"in i&&Object.keys(i.GPS).length?(h[f.ImageIFD.GPSTag]=1,a=!0,P=i.GPS):Object.keys(h).indexOf(f.ImageIFD.GPSTag.toString())>-1&&delete h[f.ImageIFD.GPSTag],"1st"in i&&"thumbnail"in i&&i.thumbnail!=null&&(d=!0,i["1st"][513]=1,i["1st"][514]=1,A=i["1st"]);var F=R(h,"0th",0),E=F[0].length+r*12+a*12+4+F[1].length,T,Q="",k=0,$,te="",V=0,oe,ie="",ae=0,z,se="",K;if(r&&(T=R(m,"Exif",E),k=T[0].length+s*12+T[1].length),a&&($=R(P,"GPS",E+k),te=$.join(""),V=te.length),s){var ne=E+k+V;oe=R(S,"Interop",ne),ie=oe.join(""),ae=ie.length}if(d){var ne=E+k+V+ae;if(z=R(A,"1st",ne),K=c(i.thumbnail),K.length>64e3)throw new Error("Given thumbnail is too large. max 64kB")}var le="",me="",pe="",fe="\0\0\0\0";if(r){var _=t+E,X=p(">L",[_]),j=34665,J=p(">H",[j]),W=p(">H",[N.Long]),Y=p(">L",[1]);le=J+W+Y+X}if(a){var _=t+E+k,X=p(">L",[_]),j=34853,J=p(">H",[j]),W=p(">H",[N.Long]),Y=p(">L",[1]);me=J+W+Y+X}if(s){var _=t+E+k+V,X=p(">L",[_]),j=40965,J=p(">H",[j]),W=p(">H",[N.Long]),Y=p(">L",[1]);pe=J+W+Y+X}if(d){var _=t+E+k+V+ae;fe=p(">L",[_]);var Se=_+z[0].length+24+4+z[1].length,Pe="\0\0\0\0"+p(">L",[Se]),xe="\0\0\0\0"+p(">L",[K.length]);se=z[0]+Pe+xe+"\0\0\0\0"+z[1]+K}var ve=F[0]+le+me+fe+F[1];return r&&(Q=T[0]+pe+T[1]),n+ve+Q+te+ie+se};function x(e){return JSON.parse(JSON.stringify(e))}function c(e){for(var t=O(e);"ÿà"<=t[1].slice(0,2)&&t[1].slice(0,2)<="ÿï";)t=[t[0]].concat(t.slice(2));return t.join("")}function y(e){return p(">"+b("B",e.length),e)}function g(e){return p(">"+b("H",e.length),e)}function L(e){return p(">"+b("L",e.length),e)}function w(e,t,i){var n="",r="",a,s,d,h;if(t=="Byte")a=e.length,a<=4?r=y(e)+b("\0",4-a):(r=p(">L",[i]),n=y(e));else if(t=="Short")a=e.length,a<=2?r=g(e)+b("\0\0",2-a):(r=p(">L",[i]),n=g(e));else if(t=="Long")a=e.length,a<=1?r=L(e):(r=p(">L",[i]),n=L(e));else if(t=="Ascii")s=e+"\0",a=s.length,a>4?(r=p(">L",[i]),n=s):r=s+b("\0",4-a);else if(t=="Rational"){if(typeof e[0]=="number")a=1,d=e[0],h=e[1],s=p(">L",[d])+p(">L",[h]);else{a=e.length,s="";for(var m=0;m<a;m++)d=e[m][0],h=e[m][1],s+=p(">L",[d])+p(">L",[h])}r=p(">L",[i]),n=s}else if(t=="SRational"){if(typeof e[0]=="number")a=1,d=e[0],h=e[1],s=p(">l",[d])+p(">l",[h]);else{a=e.length,s="";for(var m=0;m<a;m++)d=e[m][0],h=e[m][1],s+=p(">l",[d])+p(">l",[h])}r=p(">L",[i]),n=s}else t=="Undefined"&&(a=e.length,a>4?(r=p(">L",[i]),n=e):r=e+b("\0",4-a));var S=p(">L",[a]);return[S,r,n]}function R(e,t,i){var n=8,r=Object.keys(e).length,a=p(">H",[r]),s;["0th","1st"].indexOf(t)>-1?s=2+r*12+4:s=2+r*12;var d="",h="",m;for(var m in e)if(typeof m=="string"&&(m=parseInt(m)),!(t=="0th"&&[34665,34853].indexOf(m)>-1)){{if(t=="Exif"&&m==40965)continue;if(t=="1st"&&[513,514].indexOf(m)>-1)continue}var S=e[m],P=p(">H",[m]),A=v[t][m].type,F=p(">H",[N[A]]);typeof S=="number"&&(S=[S]);var E=n+s+i+h.length,T=w(S,A,E),Q=T[0],k=T[1],$=T[2];d+=P+F+Q+k,h+=$}return[a+d,h]}function I(e){var t,i;if(e.slice(0,2)=="ÿØ")t=O(e),i=U(t),i?this.tiftag=i.slice(10):this.tiftag=null;else if(["II","MM"].indexOf(e.slice(0,2))>-1)this.tiftag=e;else if(e.slice(0,4)=="Exif")this.tiftag=e.slice(6);else throw new Error("Given file is neither JPEG nor TIFF.")}if(I.prototype={get_ifd:function(e,t){var i={},n=u(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],r=e+2,a;["0th","1st"].indexOf(t)>-1?a="Image":a=t;for(var s=0;s<n;s++){e=r+12*s;var d=u(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],h=u(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],m=u(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],S=this.tiftag.slice(e+8,e+12),P=[h,m,S];d in v[a]&&(i[d]=this.convert_value(P))}return t=="0th"&&(e=r+12*n,i.first_ifd_pointer=this.tiftag.slice(e,e+4)),i},convert_value:function(e){var t=null,i=e[0],n=e[1],r=e[2],a;if(i==1)n>4?(a=u(this.endian_mark+"L",r)[0],t=u(this.endian_mark+b("B",n),this.tiftag.slice(a,a+n))):t=u(this.endian_mark+b("B",n),r.slice(0,n));else if(i==2)n>4?(a=u(this.endian_mark+"L",r)[0],t=this.tiftag.slice(a,a+n-1)):t=r.slice(0,n-1);else if(i==3)n>2?(a=u(this.endian_mark+"L",r)[0],t=u(this.endian_mark+b("H",n),this.tiftag.slice(a,a+n*2))):t=u(this.endian_mark+b("H",n),r.slice(0,n*2));else if(i==4)n>1?(a=u(this.endian_mark+"L",r)[0],t=u(this.endian_mark+b("L",n),this.tiftag.slice(a,a+n*4))):t=u(this.endian_mark+b("L",n),r);else if(i==5)if(a=u(this.endian_mark+"L",r)[0],n>1){t=[];for(var s=0;s<n;s++)t.push([u(this.endian_mark+"L",this.tiftag.slice(a+s*8,a+4+s*8))[0],u(this.endian_mark+"L",this.tiftag.slice(a+4+s*8,a+8+s*8))[0]])}else t=[u(this.endian_mark+"L",this.tiftag.slice(a,a+4))[0],u(this.endian_mark+"L",this.tiftag.slice(a+4,a+8))[0]];else if(i==7)n>4?(a=u(this.endian_mark+"L",r)[0],t=this.tiftag.slice(a,a+n)):t=r.slice(0,n);else if(i==9)n>1?(a=u(this.endian_mark+"L",r)[0],t=u(this.endian_mark+b("l",n),this.tiftag.slice(a,a+n*4))):t=u(this.endian_mark+b("l",n),r);else if(i==10)if(a=u(this.endian_mark+"L",r)[0],n>1){t=[];for(var s=0;s<n;s++)t.push([u(this.endian_mark+"l",this.tiftag.slice(a+s*8,a+4+s*8))[0],u(this.endian_mark+"l",this.tiftag.slice(a+4+s*8,a+8+s*8))[0]])}else t=[u(this.endian_mark+"l",this.tiftag.slice(a,a+4))[0],u(this.endian_mark+"l",this.tiftag.slice(a+4,a+8))[0]];else throw new Error("Exif might be wrong. Got incorrect value type to decode. type:"+i);return t instanceof Array&&t.length==1?t[0]:t}},typeof window<"u"&&typeof window.btoa=="function")var D=window.btoa;if(typeof D>"u")var D=function(t){for(var i="",n,r,a,s,d,h,m,S=0,P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";S<t.length;)n=t.charCodeAt(S++),r=t.charCodeAt(S++),a=t.charCodeAt(S++),s=n>>2,d=(n&3)<<4|r>>4,h=(r&15)<<2|a>>6,m=a&63,isNaN(r)?h=m=64:isNaN(a)&&(m=64),i=i+P.charAt(s)+P.charAt(d)+P.charAt(h)+P.charAt(m);return i};if(typeof window<"u"&&typeof window.atob=="function")var G=window.atob;if(typeof G>"u")var G=function(t){var i="",n,r,a,s,d,h,m,S=0,P="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");S<t.length;)s=P.indexOf(t.charAt(S++)),d=P.indexOf(t.charAt(S++)),h=P.indexOf(t.charAt(S++)),m=P.indexOf(t.charAt(S++)),n=s<<2|d>>4,r=(d&15)<<4|h>>2,a=(h&3)<<6|m,i=i+String.fromCharCode(n),h!=64&&(i=i+String.fromCharCode(r)),m!=64&&(i=i+String.fromCharCode(a));return i};function p(e,t){if(!(t instanceof Array))throw new Error("'pack' error. Got invalid type argument.");if(e.length-1!=t.length)throw new Error("'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.");var i;if(e[0]=="<")i=!0;else if(e[0]==">")i=!1;else throw new Error("");for(var n="",r=1,a=null,s=null,d=null;s=e[r];){if(s.toLowerCase()=="b"){if(a=t[r-1],s=="b"&&a<0&&(a+=256),a>255||a<0)throw new Error("'pack' error.");d=String.fromCharCode(a)}else if(s=="H"){if(a=t[r-1],a>65535||a<0)throw new Error("'pack' error.");d=String.fromCharCode(Math.floor(a%65536/256))+String.fromCharCode(a%256),i&&(d=d.split("").reverse().join(""))}else if(s.toLowerCase()=="l"){if(a=t[r-1],s=="l"&&a<0&&(a+=4294967296),a>4294967295||a<0)throw new Error("'pack' error.");d=String.fromCharCode(Math.floor(a/16777216))+String.fromCharCode(Math.floor(a%16777216/65536))+String.fromCharCode(Math.floor(a%65536/256))+String.fromCharCode(a%256),i&&(d=d.split("").reverse().join(""))}else throw new Error("'pack' error.");n+=d,r+=1}return n}function u(e,t){if(typeof t!="string")throw new Error("'unpack' error. Got invalid type argument.");for(var i=0,n=1;n<e.length;n++)if(e[n].toLowerCase()=="b")i+=1;else if(e[n].toLowerCase()=="h")i+=2;else if(e[n].toLowerCase()=="l")i+=4;else throw new Error("'unpack' error. Got invalid mark.");if(i!=t.length)throw new Error("'unpack' error. Mismatch between symbol and string length. "+i+":"+t.length);var r;if(e[0]=="<")r=!0;else if(e[0]==">")r=!1;else throw new Error("'unpack' error.");for(var a=[],s=0,d=1,h=null,m=null,S=null,P="";m=e[d];){if(m.toLowerCase()=="b")S=1,P=t.slice(s,s+S),h=P.charCodeAt(0),m=="b"&&h>=128&&(h-=256);else if(m=="H")S=2,P=t.slice(s,s+S),r&&(P=P.split("").reverse().join("")),h=P.charCodeAt(0)*256+P.charCodeAt(1);else if(m.toLowerCase()=="l")S=4,P=t.slice(s,s+S),r&&(P=P.split("").reverse().join("")),h=P.charCodeAt(0)*16777216+P.charCodeAt(1)*65536+P.charCodeAt(2)*256+P.charCodeAt(3),m=="l"&&h>=2147483648&&(h-=4294967296);else throw new Error("'unpack' error. "+m);a.push(h),s+=S,d+=1}return a}function b(e,t){for(var i="",n=0;n<t;n++)i+=e;return i}function O(e){if(e.slice(0,2)!="ÿØ")throw new Error("Given data isn't JPEG.");for(var t=2,i=["ÿØ"];;){if(e.slice(t,t+2)=="ÿÚ"){i.push(e.slice(t));break}else{var n=u(">H",e.slice(t+2,t+4))[0],r=t+n+2;i.push(e.slice(t,r)),t=r}if(t>=e.length)throw new Error("Wrong JPEG data.")}return i}function U(e){for(var t,i=0;i<e.length;i++)if(t=e[i],t.slice(0,2)=="ÿá"&&t.slice(4,10)=="Exif\0\0")return t;return null}function H(e,t){var i=!1,n=[];return e.forEach(function(r,a){r.slice(0,2)=="ÿá"&&r.slice(4,10)=="Exif\0\0"&&(i?n.unshift(a):(e[a]=t,i=!0))}),n.forEach(function(r){e.splice(r,1)}),!i&&t&&(e=[e[0],t].concat(e.slice(1))),e.join("")}var N={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},v={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};v["0th"]=v.Image,v["1st"]=v.Image,f.TAGS=v,f.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},f.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},f.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},f.InteropIFD={InteroperabilityIndex:1},f.GPSHelper={degToDmsRational:function(e){var t=Math.abs(e),i=t%1*60,n=i%1*60,r=Math.floor(t),a=Math.floor(i),s=Math.round(n*100);return[[r,1],[a,1],[s,100]]},dmsRationalToDeg:function(e,t){var i=t==="S"||t==="W"?-1:1,n=e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600;return n*i}},o.exports&&(l=o.exports=f),l.piexif=f})()}(ee,ee.exports)),ee.exports}var ye=Ge();const Fe="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20width='800px'%20height='800px'%20viewBox='0%200%2020%2020'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20x='0'%20fill='none'%20width='20'%20height='20'/%3e%3cg%3e%3cpath%20d='M7%205H5.05c0-1.74.85-2.9%202.95-2.9V0C4.85%200%202.96%202.11%202.96%205H1.18L3.8%208.39zm13-4v14h-5v5H1V10h9V1h10zm-2%202h-6v7h3v3h3V3zm-5%209H3v6h10v-6z'/%3e%3c/g%3e%3c/svg%3e",Ie="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='utf-8'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='800px'%20height='800px'%20viewBox='-6.7%200%20122.88%20122.88'%20version='1.1'%20id='Layer_1'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20enable-background='new%200%200%20109.484%20122.88'%20xml:space='preserve'%3e%3cg%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.347,9.633h38.297V3.76c0-2.068,1.689-3.76,3.76-3.76h21.144%20c2.07,0,3.76,1.691,3.76,3.76v5.874h37.83c1.293,0,2.347,1.057,2.347,2.349v11.514H0V11.982C0,10.69,1.055,9.633,2.347,9.633%20L2.347,9.633z%20M8.69,29.605h92.921c1.937,0,3.696,1.599,3.521,3.524l-7.864,86.229c-0.174,1.926-1.59,3.521-3.523,3.521h-77.3%20c-1.934,0-3.352-1.592-3.524-3.521L5.166,33.129C4.994,31.197,6.751,29.605,8.69,29.605L8.69,29.605z%20M69.077,42.998h9.866v65.314%20h-9.866V42.998L69.077,42.998z%20M30.072,42.998h9.867v65.314h-9.867V42.998L30.072,42.998z%20M49.572,42.998h9.869v65.314h-9.869%20V42.998L49.572,42.998z'/%3e%3c/g%3e%3c/svg%3e",ue=(o,l)=>{const f=o.__vccOpts||o;for(const[x,c]of l)f[x]=c;return f},Ae={data(){return{unitName:"",month:"",recorder:"",className:"",domains:[{name:"身體動作",images:[],description:"",rotation:[]},{name:"社會情緒",images:[],description:"",rotation:[]},{name:"語言溝通",images:[],description:"",rotation:[]},{name:"認知探索",images:[],description:"",rotation:[]},{name:"生活自理",images:[],description:"",rotation:[]},{name:"教玩具操作 / 文化藝術",images:[],description:"",rotation:[]}],isGeneratingPDF:!1,pdfGenerated:!1,popupMessage:"產生PDF中，請稍待片刻..."}},methods:{checkDescriptionLength(o){o.description.length>60&&(alert("說明欄位最多 60 個字！"),o.description=o.description.substring(0,60))},validateDescription(o){!o||!o.description||o.description.length>60&&alert("說明欄位最多 60 個字！")},handleFileUpload(o,l){const f=Array.from(o.target.files);if(!f.length)return;const x=["image/jpeg","image/png","image/jpg"];this.domains[l].images||(this.domains[l].images=[]);let c=this.domains[l].images.length,y=2-c;if(c>=2){alert("最多只能上傳 2 張圖片");return}f.slice(0,y).forEach(g=>{if(!x.includes(g.type)){alert("僅支援 JPG、JPEG、PNG 格式的圖片"),o.target.value="";return}this.processImage(g,l)}),o.target.value=null},async processImage(o,l){const f=new FileReader;f.onload=x=>{const c=new Image;c.src=x.target.result,c.onload=()=>{try{const y=document.createElement("canvas"),g=y.getContext("2d"),L=x.target.result,R=ye.piexif.load(L)["0th"][ye.piexif.ImageIFD.Orientation]||1,I=800,D=800;let G=c.width,p=c.height;G>p?G>I&&(p*=I/G,G=I):p>D&&(G*=D/p,p=D),y.width=G,y.height=p,this.setCanvasOrientation(g,R,G,p),g.drawImage(c,0,0,G,p),y.toBlob(u=>{const b=URL.createObjectURL(u);this.domains[l].images.push(b),this.domains[l].rotation.push(0)},"image/jpeg",.7)}catch(y){console.error("Error reading EXIF data:",y),this.domains[l].images.push(c.src)}}},f.readAsDataURL(o)},setCanvasOrientation(o,l,f,x){switch(l){case 2:o.transform(-1,0,0,1,f,0);break;case 3:o.transform(-1,0,0,-1,f,x);break;case 4:o.transform(1,0,0,-1,0,x);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,x,0);break;case 7:o.transform(0,-1,-1,0,x,f);break;case 8:o.transform(0,-1,1,0,0,f);break;default:o.transform(1,0,0,1,0,0)}},rotateImage(o,l){this.domains[o].rotation[l]=(this.domains[o].rotation[l]+90)%360},removeImage(o,l){this.domains[o].images.splice(l,1)},getRotatedImage(o,l){const f=document.createElement("canvas"),x=f.getContext("2d");return l===90||l===270?(f.width=o.height,f.height=o.width):(f.width=o.width,f.height=o.height),x.translate(f.width/2,f.height/2),x.rotate(l*Math.PI/180),x.drawImage(o,-o.width/2,-o.height/2),f.toDataURL()},async loadFont(o){const f=`/teacher-upload/fonts/${o}`,x=await fetch(f);if(!x.ok)throw new Error(`Failed to load font: ${f}`);const c=await x.arrayBuffer(),y=new Uint8Array(c).reduce((g,L)=>g+String.fromCharCode(L),"");return btoa(y)},async generatePDF(){this.isGeneratingPDF=!0,this.pdfGenerated=!1,this.popupMessage="產生PDF中，請稍待片刻...",await Ce();const o=new De("p","mm","a4"),l=await this.loadFont("NotoSansTC-Regular.ttf"),f=await this.loadFont("NotoSansTC-Bold.ttf");if(!l||!f)throw new Error("字體載入失敗，字體資料為空");o.addFileToVFS("NotoSansTC-Regular.ttf",l),o.addFont("NotoSansTC-Regular.ttf","NotoSansTC","normal"),o.addFileToVFS("NotoSansTC-Bold.ttf",f),o.addFont("NotoSansTC-Bold.ttf","NotoSansTC-Bold","bold"),o.setFont("NotoSansTC-Bold","bold");let x=15;o.setFontSize(18),o.text("臺北市私立長藤托嬰中心",70,x),o.setFont("NotoSansTC","normal"),o.setFontSize(12),o.text(`單元名稱: ${this.unitName}`,10,x+15);let c=70,y=110,g=150;o.text(`年月: ${this.month}`,c,x+15),o.text(`班級: ${this.className}`,y,x+15),o.text(`記錄者: ${this.recorder}`,g,x+15);const L=10,w=x+20,R=[35,85,70],I=6,D=40,G=R.reduce((v,e)=>v+e,0),p=this.domains.length;o.setLineWidth(.5),o.rect(L,w,R.reduce((v,e)=>v+e,0),6+D*p),o.setFont("NotoSansTC-Bold","bold"),o.setFontSize(12);let u=L+R[0]/2,b=L+R[0]+R[1]/2,O=L+R[0]+R[1]+R[2]/2,U=w+I-1.5;o.text("發展領域",u,U,{align:"center"}),o.text("照片",b,U,{align:"center"}),o.text("說明",O,U,{align:"center"});for(let v=0;v<p;v++){let e=w+I+v*D;o.line(L,e,L+G,e),o.setFont("NotoSansTC-Bold","bold"),o.setFontSize(12);let t=L+R[0]/2,i=e+D/2,n=o.splitTextToSize(this.domains[v].name,R[0]-10);o.text(n,t,i,{align:"center",baseline:"middle"});let r=this.domains[v].description.substring(0,60),a=R[2]-4,s=o.splitTextToSize(r,a),d=7,h=s.length*d,m=e+(D-h)/2+d/2,S=L+R[0]+R[1]+R[2]/2;o.setFont("NotoSansTC","normal"),o.setFontSize(10),o.text(s,S,m,{align:"center",baseline:"middle"})}let H=L;for(let v of R)H+=v,o.line(H,w,H,w+I+D*p);for(let v=0;v<p;v++){let e=w+I+v*D,t=R[1]/2-3,i=D-6,n=L+R[0]+2,r=n+t+1.5,a=this.domains[v].images||[];for(let s=0;s<a.length;s++){let d=a[s],h=d.includes("image/png")?"PNG":"JPEG",m=new Image;m.src=d,await new Promise(S=>{m.onload=()=>{let P=this.getRotatedImage(m,this.domains[v].rotation[s]),A=m.width,F=m.height;(this.domains[v].rotation[s]===90||this.domains[v].rotation[s]===270)&&([A,F]=[F,A]),A>t&&(F*=t/A,A=t),F>i&&(A*=i/F,F=i);let E=e+(D-F)/2,T=s===0?n:r;o.addImage(P,h,T,E,A,F,void 0,"FAST"),S()}})}}let N=`發展領域記錄表-${this.month}-${this.className}-${this.recorder}.pdf`;o.save(N),this.isGeneratingPDF=!1,this.pdfGenerated=!0,this.popupMessage="PDF已完成，請自行下載。",this.unitName="",this.month="",this.recorder="",this.className="",this.domains.forEach(v=>{v.images=[],v.description="",v.rotation=[]}),setTimeout(()=>{this.pdfGenerated=!1},3e3)}}},Ee={class:"container"},Te={class:"card"},ke={class:"form-group"},Be={class:"card"},_e={class:"file-label"},Me=["onChange"],Oe={key:0,class:"image-preview"},Ne={class:"image-wrapper"},Ue=["src"],He={class:"image-actions"},Ve=["onClick"],ze=["onClick"],Xe=["onUpdate:modelValue","onInput","onBlur"],je={key:1,class:"error"},Je={key:0,class:"overlay"},We={class:"popup"};function Ye(o,l,f,x,c,y){return B(),M("div",Ee,[l[16]||(l[16]=C("h1",null,"六大發展領域記錄表",-1)),C("section",Te,[l[11]||(l[11]=C("h2",null,"Step 1: 填寫班級資料",-1)),C("div",ke,[l[5]||(l[5]=C("label",null,"單元名稱",-1)),q(C("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=g=>c.unitName=g),maxlength:"5",placeholder:"輸入單元名稱"},null,512),[[Z,c.unitName]]),l[6]||(l[6]=C("div",{class:"alert alert-info"},"最多只能輸入5個字",-1)),l[7]||(l[7]=C("label",null,"年+月份",-1)),q(C("input",{type:"text","onUpdate:modelValue":l[1]||(l[1]=g=>c.month=g),placeholder:"輸入年+月份"},null,512),[[Z,c.month]]),l[8]||(l[8]=C("div",{class:"alert alert-info"},"ex: 114年3月",-1)),l[9]||(l[9]=C("label",null,"班級",-1)),q(C("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=g=>c.className=g),placeholder:"輸入班級"},null,512),[[Z,c.className]]),l[10]||(l[10]=C("label",null,"記錄者",-1)),q(C("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=g=>c.recorder=g),placeholder:"輸入記錄者"},null,512),[[Z,c.recorder]])])]),C("section",Be,[l[15]||(l[15]=C("h2",null,"Step 2: 上傳六大發展領域資料",-1)),(B(!0),M(ce,null,he(c.domains,(g,L)=>(B(),M("div",{key:L,class:"domain-card"},[C("h3",null,de(g.name),1),C("label",_e,[C("input",{type:"file",accept:"image/jpeg, image/png",onChange:w=>y.handleFileUpload(w,L),multiple:""},null,40,Me)]),(g.images||[]).length?(B(),M("div",Oe,[(B(!0),M(ce,null,he(g.images||[],(w,R)=>(B(),M("div",{key:R,class:"image-container"},[C("div",Ne,[C("img",{src:w,alt:"上傳圖片",width:"200px",style:Re({transform:`rotate(${g.rotation[R]}deg)`})},null,12,Ue)]),C("div",He,[C("button",{onClick:I=>y.rotateImage(L,R),class:"rotate-btn"},l[12]||(l[12]=[C("img",{src:Fe,alt:"旋轉",width:"26",height:"26"},null,-1)]),8,Ve),C("button",{onClick:I=>y.removeImage(L,R),class:"delete-btn"},l[13]||(l[13]=[C("img",{src:Ie,alt:"刪除",width:"30",height:"30"},null,-1)]),8,ze)])]))),128))])):re("",!0),l[14]||(l[14]=C("div",{class:"alert alert-danger"},"最多只能上傳 2 張圖片",-1)),q(C("textarea",{"onUpdate:modelValue":w=>g.description=w,onInput:w=>y.checkDescriptionLength(g),onBlur:w=>y.validateDescription(g),placeholder:"請輸入發展領域說明",maxlength:"60",rows:"3"},null,40,Xe),[[Z,g.description]]),g.description.length>=60?(B(),M("small",je,"⚠️ 最多只能輸入 60 個字！")):re("",!0)]))),128))]),c.isGeneratingPDF||c.pdfGenerated?(B(),M("div",Je,[C("div",We,[C("p",null,de(c.popupMessage),1)])])):re("",!0),C("button",{class:"pdf-button",onClick:l[4]||(l[4]=(...g)=>y.generatePDF&&y.generatePDF(...g))},"📄 產生 PDF")])}const qe=ue(Ae,[["render",Ye]]),Ze={components:{UploadForm:qe}};function Qe(o,l,f,x,c,y){const g=Le("UploadForm");return B(),be(g)}const $e=ue(Ze,[["render",Qe]]);we($e).mount("#app");
